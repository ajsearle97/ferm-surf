

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; IFermi 0.2.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://github.com/fermisurfaces/IFermiindex.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> IFermi
          

          
            
            <img src="_static/docs-logo2-02.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Usage Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction_to_ifermi.html">Python API introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to IFermi</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/fermisurfaces/IFermi">IFermi on GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Function Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ifermi.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">IFermi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          <div style="text-align: right;">
<a href="https://github.com/fermisurfaces/IFermi" target="_blank">» GitHub</a>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>IFermi is a Python (3.6+) library and set of command-line tools for the generation,
analysis, and visualisation of Fermi surfaces and Fermi slices. The goal of the library
is to provide fully featured FermiSurface and FermiSlice objects that allow for easy
manipulation and analysis. The main features include:</p>
<ul class="simple">
<li><p>Interpolation of electronic band structures onto dense k-point meshes.</p></li>
<li><p>Extraction of Fermi surfaces and Fermi slices from electronic band structures.</p></li>
<li><p>Projection of arbitrary properties onto Fermi surfaces and Fermi slices.</p></li>
<li><p>Tools to calculate Fermi surface dimensionality, orientation, and averaged projections,
including Fermi velocities.</p></li>
<li><p>Interactive visualisation of Fermi surfaces and slices, with support for
<a class="reference external" href="https://docs.enthought.com/mayavi/mayavi/">mayavi</a>, <a class="reference external" href="https://plot.ly/">plotly</a> and
<a class="reference external" href="https://matplotlib.org">matplotlib</a>.</p></li>
<li><p>Generation and visualisation of spin-texture.</p></li>
</ul>
<p>IFermi’s command-line tools only work with VASP calculations but support for additional
DFT packages will be added in the future.</p>
<a class="reference external image-reference" href="https://raw.githubusercontent.com/fermisurfaces/IFermi/main/docs/src/_static/fermi-surface-example.png"><img alt="Example Fermi surfaces" src="https://raw.githubusercontent.com/fermisurfaces/IFermi/main/docs/src/_static/fermi-surface-example.png" /></a>
<div class="section" id="quick-start">
<h2>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://fermisurfaces.github.io/IFermi/cli.html">online documentation</a> provides a full
description of the available command-line options.</p>
<div class="section" id="analysis">
<h3>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h3>
<p>Fermi surface properties, including dimensionality and orientation can be extracted
from a vasprun.xml file using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi info --property velocity
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Fermi Surface Summary
=====================

  # surfaces: 5
  Area: 32.75 Å⁻²
  Avg velocity: 9.131e+05 m/s

Isosurfaces
~~~~~~~~~~~

      Band    Area [Å⁻²]    Velocity avg [m/s]   Dimensionality    Orientation
    ------  ------------  --------------------  ----------------  -------------
         6         1.944             7.178e+05         2D           (0, 0, 1)
         7         4.370             9.092e+05      quasi-2D        (0, 0, 1)
         7         2.961             5.880e+05         2D           (0, 0, 1)
         8         3.549             1.105e+06      quasi-2D        (0, 0, 1)
         8         3.549             1.105e+06      quasi-2D        (0, 0, 1)
</pre></div>
</div>
</div>
<div class="section" id="visualisation">
<h3>Visualisation<a class="headerlink" href="#visualisation" title="Permalink to this headline">¶</a></h3>
<p>Three-dimensional Fermi surfaces can be visualized from a <code class="docutils literal notranslate"><span class="pre">vasprun.xml</span></code> file using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi plot
</pre></div>
</div>
<p>The two-dimensional slice of a Fermi surface along the plane specified by the miller
indices (j k l) and distance d can be plotted from a <code class="docutils literal notranslate"><span class="pre">vasprun.xml</span></code> file using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi plot --slice j k l d
</pre></div>
</div>
</div>
<div class="section" id="python-library">
<h3>Python library<a class="headerlink" href="#python-library" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ifermi</span></code> command line tools are build on the IFermi Python library. Here is an
example of how to load DFT calculation outputs, interpolate the energies onto a dense mesh,
generate a Fermi surface, calculate Fermi surface properties, and visualise the surface.
A more complete summary of the API is given in the <a class="reference external" href="https://fermisurfaces.github.io/IFermi/plotting_using_python.html">API introduction page</a>
and in the <a class="reference external" href="https://fermisurfaces.github.io/IFermi/ifermi.html">API Reference page</a> in the documentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymatgen.io.vasp.outputs</span> <span class="kn">import</span> <span class="n">Vasprun</span>
<span class="kn">from</span> <span class="nn">ifermi.surface</span> <span class="kn">import</span> <span class="n">FermiSurface</span>
<span class="kn">from</span> <span class="nn">ifermi.interpolate</span> <span class="kn">import</span> <span class="n">FourierInterpolator</span>
<span class="kn">from</span> <span class="nn">ifermi.plot</span> <span class="kn">import</span> <span class="n">FermiSlicePlotter</span><span class="p">,</span> <span class="n">FermiSurfacePlotter</span><span class="p">,</span> <span class="n">save_plot</span><span class="p">,</span> <span class="n">show_plot</span>
<span class="kn">from</span> <span class="nn">ifermi.kpoints</span> <span class="kn">import</span> <span class="n">kpoints_from_bandstructure</span>

<span class="c1"># load VASP calculation outputs</span>
<span class="n">vr</span> <span class="o">=</span> <span class="n">Vasprun</span><span class="p">(</span><span class="s2">&quot;vasprun.xml&quot;</span><span class="p">)</span>
<span class="n">bs</span> <span class="o">=</span> <span class="n">vr</span><span class="o">.</span><span class="n">get_band_structure</span><span class="p">()</span>

<span class="c1"># interpolate the energies onto a dense k-point mesh</span>
<span class="n">interpolator</span> <span class="o">=</span> <span class="n">FourierInterpolator</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
<span class="n">dense_bs</span><span class="p">,</span> <span class="n">velocities</span> <span class="o">=</span> <span class="n">interpolator</span><span class="o">.</span><span class="n">interpolate_bands</span><span class="p">(</span><span class="n">return_velocities</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># generate the Fermi surface and calculate the dimensionality</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">FermiSurface</span><span class="o">.</span><span class="n">from_band_structure</span><span class="p">(</span>
  <span class="n">dense_bs</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">wigner_seitz</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">calculate_dimensionality</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># generate the Fermi surface and calculate the group velocity at the</span>
<span class="c1"># center of each triangular face</span>
<span class="n">dense_kpoints</span> <span class="o">=</span> <span class="n">kpoints_from_bandstructure</span><span class="p">(</span><span class="n">dense_bs</span><span class="p">)</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">FermiSurface</span><span class="o">.</span><span class="n">from_band_structure</span><span class="p">(</span>
  <span class="n">dense_bs</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">wigner_seitz</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">calculate_dimensionality</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">property_data</span><span class="o">=</span><span class="n">velocities</span><span class="p">,</span> <span class="n">property_kpoints</span><span class="o">=</span><span class="n">dense_kpoints</span>
<span class="p">)</span>

<span class="c1"># number of isosurfaces in the Fermi surface</span>
<span class="n">fs</span><span class="o">.</span><span class="n">n_surfaces</span>

<span class="c1"># number of isosurfaces for each Spin channel</span>
<span class="n">fs</span><span class="o">.</span><span class="n">n_surfaces_per_spin</span>

<span class="c1"># the total area of the Fermi surface</span>
<span class="n">fs</span><span class="o">.</span><span class="n">area</span>

<span class="c1"># the area of each isosurface</span>
<span class="n">fs</span><span class="o">.</span><span class="n">area_surfaces</span>

<span class="c1"># loop over all isosurfaces and check their properties</span>
<span class="c1"># the isosurfaces are given as a list for each spin channel</span>
<span class="k">for</span> <span class="n">spin</span><span class="p">,</span> <span class="n">isosurfaces</span> <span class="ow">in</span> <span class="n">fs</span><span class="o">.</span><span class="n">isosurfaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">isosurface</span> <span class="ow">in</span> <span class="n">isosurfaces</span><span class="p">:</span>
        <span class="c1"># the dimensionality (does the surface cross periodic boundaries)</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">dimensionality</span>

        <span class="c1"># what is the orientation</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">orientation</span>

        <span class="c1"># does the surface have face properties</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">has_properties</span>

        <span class="c1"># calculate the norms of the properties</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">properties_norms</span>

        <span class="c1"># calculate scalar projection of properties on to [0 0 1] vector</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">scalar_projection</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

        <span class="c1"># uniformly sample the surface faces to a consistent density</span>
        <span class="n">isosurface</span><span class="o">.</span><span class="n">sample_uniform</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># plot the Fermi surface</span>
<span class="n">fs_plotter</span> <span class="o">=</span> <span class="n">FermiSurfacePlotter</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">fs_plotter</span><span class="o">.</span><span class="n">get_plot</span><span class="p">()</span>

<span class="c1"># generate Fermi slice along the (0 0 1) plane going through the Γ-point.</span>
<span class="n">fermi_slice</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">get_fermi_slice</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># number of isolines in the slice</span>
<span class="n">fermi_slice</span><span class="o">.</span><span class="n">n_lines</span>

<span class="c1"># do the lines have segment properties</span>
<span class="n">fermi_slice</span><span class="o">.</span><span class="n">has_properties</span>

<span class="c1"># plot slice</span>
<span class="n">slice_plotter</span> <span class="o">=</span> <span class="n">FermiSlicePlotter</span><span class="p">(</span><span class="n">fermi_slice</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">slice_plotter</span><span class="o">.</span><span class="n">get_plot</span><span class="p">()</span>

<span class="n">save_plot</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="s2">&quot;fermi-slice.png&quot;</span><span class="p">)</span>  <span class="c1"># saves the plot to a file</span>
<span class="n">show_plot</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>  <span class="c1"># displays an interactive plot</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="citing-ifermi">
<h2>Citing IFermi<a class="headerlink" href="#citing-ifermi" title="Permalink to this headline">¶</a></h2>
<p>If you find IFermi useful, please encourage its development by citing the following
<a class="reference external" href="https://doi.org/10.21105/joss.03089">paper</a> in your research output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ganose</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span> <span class="n">M</span><span class="o">.</span><span class="p">,</span> <span class="n">Searle</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="p">,</span> <span class="n">Jain</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="p">,</span> <span class="n">Griffin</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span> <span class="n">M</span><span class="o">.</span><span class="p">,</span> <span class="n">IFermi</span><span class="p">:</span> <span class="n">A</span> <span class="n">python</span> <span class="n">library</span> <span class="k">for</span> <span class="n">Fermi</span>
<span class="n">surface</span> <span class="n">generation</span> <span class="ow">and</span> <span class="n">analysis</span><span class="o">.</span> <span class="n">Journal</span> <span class="n">of</span> <span class="n">Open</span> <span class="n">Source</span> <span class="n">Software</span><span class="o">.</span> <span class="n">Journal</span> <span class="n">of</span> <span class="n">Open</span>
<span class="n">Source</span> <span class="n">Software</span><span class="p">,</span> <span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span> <span class="p">(</span><span class="mi">59</span><span class="p">),</span> <span class="mi">3089</span>
</pre></div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>The recommended way to install IFermi is in a conda environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create --name ifermi pip cmake numpy
conda activate ifermi
conda install -c conda-forge pymatgen boltztrap2 pyfftw
pip install ifermi
<span class="sb">`</span>
</pre></div>
</div>
<p>IFermi is currently compatible with Python 3.6+ and relies on a number of
open-source python packages, specifically:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://pymatgen.org">pymatgen</a> for parsing DFT calculation outputs.</p></li>
<li><p><a class="reference external" href="https://gitlab.com/sousaw/BoltzTraP2">BoltzTrap2</a> for band structure interpolation.</p></li>
<li><p><a class="reference external" href="https://trimsh.org/">trimesh</a> for manipulating isosurfaces.</p></li>
<li><p><a class="reference external" href="https://matplotlib.org">matplotlib</a>, <a class="reference external" href="https://docs.enthought.com/mayavi/mayavi/">mayavi</a>, and <a class="reference external" href="https://plot.ly/">plotly</a> for three-dimensional plotting.</p></li>
</ul>
<div class="section" id="running-tests">
<h3>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h3>
<p>The integration tests can be run to ensure IFermi has been installed correctly. First
download the IFermi source and install the test requirements.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fermisurfaces</span><span class="o">/</span><span class="n">IFermi</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">IFermi</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">.</span><span class="p">[</span><span class="n">tests</span><span class="p">]</span>
</pre></div>
</div>
<p>The tests can be run in the IFermi folder using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
</div>
</div>
<div class="section" id="need-help">
<h2>Need Help?<a class="headerlink" href="#need-help" title="Permalink to this headline">¶</a></h2>
<p>Ask questions about the IFermi Python API and command-line tools on the <a class="reference external" href="https://matsci.org/c/ifermi">IFermi
support forum</a>.
If you’ve found an issue with IFermi, please submit a bug report
<a class="reference external" href="https://github.com/fermisurfaces/IFermi/issues">here</a>.</p>
</div>
<div class="section" id="whats-new">
<h2>What’s new?<a class="headerlink" href="#whats-new" title="Permalink to this headline">¶</a></h2>
<p>Track changes to IFermi through the
<a class="reference external" href="https://fermisurfaces.github.io/IFermi/changelog.html">changelog</a>.</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>We greatly appreciate any contributions in the form of a pull request.
Additional information on contributing to IFermi can be found <a class="reference external" href="https://fermisurfaces.github.io/IFermi/contributing.html">here</a>.
We maintain a list of all contributors <a class="reference external" href="https://fermisurfaces.github.io/IFermi/contributors.html">here</a>.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>IFermi is made available under the MIT License (see LICENSE file).</p>
</div>
<div class="section" id="acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>Developed by Amy Searle and Alex Ganose.
Sinéad Griffin designed and led the project.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Amy Searle and Alex Ganose

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>