

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ifermi program &mdash; IFermi 0.1.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
  
  
    <link rel="canonical" href="https://github.com/ajsearle97/IFermicli.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plotting using Python" href="plotting_using_python.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> IFermi
          

          
            
            <img src="_static/logo-docs-01.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Usage Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command-line interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#interpolation-factor">Interpolation factor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-backend">Plotting backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output-files">Output files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-spin-channels">Selecting spin channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fermi-surface-energy">Fermi surface energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changing-the-viewpoint">Changing the viewpoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reciprocal-space">Reciprocal space</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-slices">Generating slices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command-line interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plotting_using_python.html">Plotting using Python</a></li>
</ul>
<p class="caption"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to IFermi</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ajsearle97/IFermi">See project on GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Function Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IFermi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">ifermi</span></code> program</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ajsearle97/IFermi/blob/master/docs_rst/cli.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="ifermi-program">
<h1><code class="docutils literal notranslate"><span class="pre">ifermi</span></code> program<a class="headerlink" href="#ifermi-program" title="Permalink to this headline">¶</a></h1>
<p>IFermi can be used on the command-line through the <code class="docutils literal notranslate"><span class="pre">ifermi</span></code>
command. All of the options provided in the command-line are also accessible using the
<a class="reference external" href="plotting_using_python.html">Python API</a>.</p>
<p>IFermi works in 4 stages:</p>
<ol class="arabic simple">
<li><p>It loads a band structure from DFT calculation outputs.</p></li>
<li><p>It interpolates the band structure onto a dense k-point mesh using Fourier
interpolation as implemented in <a class="reference external" href="https://gitlab.com/sousaw/BoltzTraP2">BoltzTraP2</a>.</p></li>
<li><p>It extracts the Fermi surface at a given energy level.</p></li>
<li><p>It plots the surface using a number of plotting backends.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, IFermi only works with VASP calculation outputs. Support for additional
DFT packages will be added in a future release.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>IFermi is controlled on the command-line using the <code class="docutils literal notranslate"><span class="pre">ifermi</span></code> command. The only input
required is a vasprun.xml file. To plot an interactive Fermi surface just run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi
</pre></div>
</div>
<p>IFermi will look for a vasprun.xml or vasprun.xml.gz file in the current directory.
To specify a particular vasprun file the <code class="docutils literal notranslate"><span class="pre">--filename</span></code> (or <code class="docutils literal notranslate"><span class="pre">-f</span></code> for short) option
can be used:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --filename my_vasprun.xml
</pre></div>
</div>
<div class="section" id="interpolation-factor">
<h3>Interpolation factor<a class="headerlink" href="#interpolation-factor" title="Permalink to this headline">¶</a></h3>
<p>The band structure extracted from the vasprun must be processed before the Fermi
surface can be generated. The two key issues are:</p>
<ol class="arabic simple">
<li><p>It only contains the irreducible portion of the Brillouin zone (since symmetry was
used in the calculation) and therefore does not contain enough information to plot
the Fermi surface across the full reciprocal lattice.</p></li>
<li><p>It was calculated on a relatively coarse k-point mesh and will therefore produce a
rather jagged Fermi surface.</p></li>
</ol>
<p>Both issues can be solved be interpolating the band structure onto a denser k-point
mesh. This is achieved by using <a class="reference external" href="https://gitlab.com/sousaw/BoltzTraP2">BoltzTraP2</a>
to Fourier interpolate the eigenvalues onto a denser mesh that covers the full
Brillouin zone.</p>
<p>The degree of interpolation is controlled by the <code class="docutils literal notranslate"><span class="pre">--interpolation-factor</span></code> (<code class="docutils literal notranslate"><span class="pre">-i</span></code>)
argument. A value of 8 (the default value), roughly indicates that the interpolated band
structure will contain 8x as many k-points. Increasing the interpolation factor will
result in more smooth Fermi surfaces. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --interpolation-factor <span class="m">10</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As the interpolation increases, the generation of the Fermi surface and plot will
take a longer time and can result in large file sizes.</p>
</div>
</div>
<div class="section" id="plotting-backend">
<h3>Plotting backend<a class="headerlink" href="#plotting-backend" title="Permalink to this headline">¶</a></h3>
<p>IFermi supports multiple plotting backends. The default is to the
<a class="reference external" href="http://plotly.com">plotly</a> package but <a class="reference external" href="http://matplotlib.org">matplotlib</a> and
<a class="reference external" href="https://docs.enthought.com/mayavi/mayavi/">mayavi</a> are also supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The mayavi dependencies are not installed by default. To use this backend, follow
the installation instructions <a class="reference external" href="https://docs.enthought.com/mayavi/mayavi/installation.html">here</a>
and then install IFermi using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">ifermi[mayavi]</span></code>.</p>
</div>
<p>Different plotting packages can be specified using the <code class="docutils literal notranslate"><span class="pre">--type</span></code> option (<code class="docutils literal notranslate"><span class="pre">-t</span></code>). For
example, to use matplotlib:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --type matplotlib
</pre></div>
</div>
</div>
<div class="section" id="output-files">
<h3>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h3>
<p>By default, IFermi generates interactive plots. To generate static images, an output
file can be specified using the <code class="docutils literal notranslate"><span class="pre">--output</span></code> (<code class="docutils literal notranslate"><span class="pre">-o</span></code>) option. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --output fermi-surface.jpg
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Saving output files with the plotly backend requires plotly-orca to be installed.</p>
</div>
<p>Running the above command in the <code class="docutils literal notranslate"><span class="pre">examples/MgB2</span></code> directory produces the plot:</p>
<a class="reference internal image-reference" href="_images/fs-1.jpg"><img alt="_images/fs-1.jpg" class="align-center" src="_images/fs-1.jpg" style="height: 250px;" /></a>
</div>
<div class="section" id="selecting-spin-channels">
<h3>Selecting spin channels<a class="headerlink" href="#selecting-spin-channels" title="Permalink to this headline">¶</a></h3>
<p>In the plot above, the spins are degenerate (the Hamiltonian does not differentiate
between the up and down spins). This is why the surface looks dappled, IFermi
is plotting two redundant surfaces. To stop it from doing this, we can specify that
only one spin component should be plotted using the <code class="docutils literal notranslate"><span class="pre">--spin</span></code> option. The default
is to plot both spins but a single spin channel can be selected through the names
“up” and “down”. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --spin up
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/fs-spin-up.jpg"><img alt="_images/fs-spin-up.jpg" class="align-center" src="_images/fs-spin-up.jpg" style="height: 250px;" /></a>
</div>
<div class="section" id="fermi-surface-energy">
<h3>Fermi surface energy<a class="headerlink" href="#fermi-surface-energy" title="Permalink to this headline">¶</a></h3>
<p>The energy level offset at which the Fermi surface is calculated is controlled by the <code class="docutils literal notranslate"><span class="pre">--mu</span></code>
option. The energy level is given relative to the Fermi level of the VASP calculation and is given in eV.
By default, the Fermi surface is calculated at <code class="docutils literal notranslate"><span class="pre">mu</span> <span class="pre">=</span> <span class="pre">0</span></code>, i.e., at the Fermi level.</p>
<p>For gapped materials, <code class="docutils literal notranslate"><span class="pre">mu</span></code> must be selected so that it falls within the
conduction or valence bands otherwise no Fermi surface will be displayed. For
example. The following command will generate the Fermi surface at 1 eV above the Fermi
level:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --mu <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-the-viewpoint">
<h3>Changing the viewpoint<a class="headerlink" href="#changing-the-viewpoint" title="Permalink to this headline">¶</a></h3>
<p>The viewpoint (camera angle) can be changed using the <code class="docutils literal notranslate"><span class="pre">--azimuth</span></code> (<code class="docutils literal notranslate"><span class="pre">-a</span></code>) and
<code class="docutils literal notranslate"><span class="pre">--elevation</span></code> (<code class="docutils literal notranslate"><span class="pre">-e</span></code>) options. This will change both the initial viewpoint
for interactive plots, and the final viewpoint for static plots. To summarize:</p>
<ul class="simple">
<li><p>The azimuth is the angle subtended by the viewpoint position vector on a sphere
projected onto the x-y plane in degrees. The default is 45°.</p></li>
<li><p>The elevation (or zenith) is the angle subtended by the viewpoint position vector and
the z-axis. The default is 35°.</p></li>
</ul>
<p>The viewpoint always directed to the center of the the Fermi surface (position [0 0 0]).
As an example, the viewpoint could be changed using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --azimuth <span class="m">120</span> --elevation <span class="m">5</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/fs-viewpoint.jpg"><img alt="_images/fs-viewpoint.jpg" class="align-center" src="_images/fs-viewpoint.jpg" style="height: 250px;" /></a>
</div>
<div class="section" id="reciprocal-space">
<h3>Reciprocal space<a class="headerlink" href="#reciprocal-space" title="Permalink to this headline">¶</a></h3>
<p>By default, the Wigner–Seitz cell is used to contain to the Fermi surface. The
parallelepiped reciprocal lattice cell can be used instead by selecting the
<code class="docutils literal notranslate"><span class="pre">--reciprocal-cell</span></code> option (<code class="docutils literal notranslate"><span class="pre">-r</span></code>). For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --reciprocal-cell
</pre></div>
</div>
</div>
<div class="section" id="generating-slices">
<h3>Generating slices<a class="headerlink" href="#generating-slices" title="Permalink to this headline">¶</a></h3>
<p>IFermi can also generate two-dimensional slices of the Fermi surface along a specified
plane using the <code class="docutils literal notranslate"><span class="pre">--slice</span></code> option. Planes are defined by their miller indices (a b c)
and a distance from the plane, d. Most of the above options also apply to to Fermi slices.
However, slices are always plotted using matplotlib as the backend.</p>
<p>For example, a slice through the (0 0 1) plane can be generated using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ifermi --slice <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> --output slice.png
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/slice.png"><img alt="_images/slice.png" class="align-center" src="_images/slice.png" style="height: 250px;" /></a>
</div>
</div>
<div class="section" id="command-line-interface">
<h2>Command-line interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<p><blockquote>
<div><p>ifermi is a package for plotting Fermi-surfaces</p>
</div></blockquote>
</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">ifermi</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">F</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="n">O</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="n">MU</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">i</span> <span class="n">N</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">spin</span> <span class="n">SPIN</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">a</span> <span class="n">A</span><span class="p">]</span>
              <span class="p">[</span><span class="o">-</span><span class="n">e</span> <span class="n">E</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">smooth</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">t</span> <span class="n">PLOT_TYPE</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nb">slice</span> <span class="n">N</span> <span class="n">N</span> <span class="n">N</span> <span class="n">N</span><span class="p">]</span>
              <span class="p">[</span><span class="o">--</span><span class="n">decimate</span><span class="o">-</span><span class="n">factor</span> <span class="n">N</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">scale</span> <span class="n">SCALE</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="Named Arguments">
<h3>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">¶</a></h3>
<dl class="option-list">
<dt><kbd>-f, --filename</kbd></dt>
<dd><p>vasprun.xml file to plot</p>
</dd>
<dt><kbd>-o, --output</kbd></dt>
<dd><p>output filename</p>
</dd>
<dt><kbd>-m, --mu</kbd></dt>
<dd><p>offset from the Fermi level at which to calculate Fermi surface</p>
<p>Default: 0.0</p>
</dd>
<dt><kbd>-i, --interpolation-factor</kbd></dt>
<dd><p>interpolation factor for band structure (default: 8)</p>
<p>Default: 8</p>
</dd>
<dt><kbd>-r, --reciprocal-cell</kbd></dt>
<dd><p>use the reciprocal lattice rather than Wigner-Seitz cell</p>
<p>Default: True</p>
</dd>
<dt><kbd>--spin</kbd></dt>
<dd><p>select spin channel (options: up, 1; down, -1)</p>
</dd>
<dt><kbd>-a, --azimuth</kbd></dt>
<dd><p>viewpoint azmith angle in degrees (default: 45)</p>
<p>Default: 45.0</p>
</dd>
<dt><kbd>-e, --elevation</kbd></dt>
<dd><p>viewpoint elevation (zenith) angle in degrees (default: 35)</p>
<p>Default: 35.0</p>
</dd>
<dt><kbd>--smooth</kbd></dt>
<dd><p>smooth the Fermi surface</p>
<p>Default: False</p>
</dd>
<dt><kbd>-t, --type</kbd></dt>
<dd><p>plotting type (options: matplotlib, plotly, mayavi)</p>
<p>Default: “plotly”</p>
</dd>
<dt><kbd>--slice</kbd></dt>
<dd><p>slice through the Brillouin zone (format: j k l distance)</p>
</dd>
<dt><kbd>--decimate-factor</kbd></dt>
<dd><p>factor by which to decimate Fermi surfaces (i.e., 0.8 gives 20 % fewer faces)</p>
</dd>
<dt><kbd>--scale</kbd></dt>
<dd><p>scale for image resolution (default: 4)</p>
<p>Default: 4</p>
</dd>
</dl>
</div>
<p><blockquote>
<div><p>Author: Amy Searle
Version: 0.1.0
Last updated: Sept 18, 2019</p>
</div></blockquote>
</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Amy Searle and Alex Ganose

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>